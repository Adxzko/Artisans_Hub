<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Artisan Hub</title>
<style>
body { font-family: Arial, sans-serif; margin:0; background:#fff8f0; }
header { background:#ff6f00; color:white; padding:1rem; text-align:center; }
nav { display:flex; background:#ffcc80; justify-content:center; gap:10px; padding:10px; }
nav button { padding:10px 20px; border:none; background:#ffb74d; color:white; cursor:pointer; border-radius:5px; }
nav button.active { background:#ff6f00; }
section { display:none; padding:20px; }
section.active { display:block; }
form input, form select, form button { display:block; width:100%; padding:10px; margin:5px 0; }
.products { display:flex; flex-wrap:wrap; gap:15px; margin-top:20px; justify-content:center; }
.card { background: white; border-radius: 12px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1); padding: 15px; margin: 15px; width: 250px; text-align: center; display: inline-block; vertical-align: top; transition: transform 0.2s ease-in-out; position:relative; }
.card:hover { transform: translateY(-5px); }
.card img { width: 100%; height: 160px; object-fit: cover; border-radius: 8px; margin-bottom: 10px; cursor:pointer; }
.card button { padding: 8px 12px; margin: 6px 4px; border: none; border-radius: 6px; cursor: pointer; color: white; font-size: 14px; transition: 0.2s; position:absolute; top:5px; }
.card button.edit { background: #4CAF50; right:85px; }
.card button.delete { background: #f44336; right:45px; }
.card button.favorite { background:#ff4081; left:5px; }
.card button.contact { background:#2196F3; right:5px; }
.card button:hover { opacity:0.85; }
footer { text-align:center; background:#ffe0b2; padding:10px; margin-top:20px; }
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; }
.modal-content { background:white; padding:20px; border-radius:8px; max-width:500px; text-align:center; }
.modal-content h3 { margin-top:0; }
.modal-close { cursor:pointer; padding:5px 10px; background:#ff6f00; color:white; border:none; border-radius:5px; margin-top:10px; }
#filterBar { display:flex; justify-content:center; gap:10px; margin-bottom:10px; flex-wrap:wrap; }
#filterBar input, #filterBar select { width:auto; }
</style>
</head>
<body>

<header>
<h1>Artisan Hub</h1>
</header>

<nav>
<button class="tab-btn active" data-tab="home">Home</button>
<button class="tab-btn" data-tab="add">Add Product</button>
<button class="tab-btn" data-tab="view">View Products</button>
<button class="tab-btn" data-tab="about">About</button>
</nav>

<section id="home" class="active">
<h2>Welcome to Our WEBSITE</h2>
<p>Support local artisans by promoting their handmade products.</p>
<p>Featured product of the day:</p>
<div id="featured" style="text-align:center; font-style:bold;"></div>
</section>

<section id="add">
<h2>Add or Edit Product</h2>
<form id="productForm">
<input type="text" id="name" placeholder="Product Name" required>
<input type="text" id="artisan" placeholder="Artisan Name" required>
<input type="number" id="price" placeholder="Price in ₹" required>
<input type="tel" id="phone" placeholder="Contact Number" required>
<input type="file" id="imageUpload" accept="image/*">
<select id="category" required>
<option value="">Select Category</option>
<option>Silk</option>
<option>Bamboo</option>
<option>Pottery</option>
<option>Jewelry</option>
<option>Other</option>
</select>
<input type="hidden" id="editId">
<button type="submit">Save Product</button>
</form>
</section>

<section id="view">
<h2>Product Gallery</h2>
<div id="filterBar">
<input type="text" id="searchInput" placeholder="Search by name or artisan">
<select id="categoryFilter">
<option value="">All Categories</option>
<option>Silk</option>
<option>Bamboo</option>
<option>Pottery</option>
<option>Jewelry</option>
<option>Other</option>
</select>
</div>
<div class="products" id="productList"></div>
</section>

<section id="about">
<h2>About</h2>
<p>This is a prototype platform to showcase and promote local artisans and their crafts. You can add products, view others’ products, edit, delete, filter, and favorite products. This platform provides a connection between buyers and sellers.</p>
</section>

<div class="modal" id="bioModal">
<div class="modal-content">
<h3 id="modalTitle"></h3>
<p id="modalBio"></p>
<button class="modal-close" onclick="closeModal()">Close</button>
</div>
</div>

<footer>
&copy; 2025 A Project based on The theme "Vocal for local" under BUILDATHON
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-analytics.js";
import { getDatabase, ref, set, push, onValue, remove, update } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyAxo8Yh-uo0ganIbb8A9lTswNuU3fJ1SWw",
  authDomain: "artisanhub-95aef.firebaseapp.com",
  databaseURL: "https://artisanhub-95aef-default-rtdb.firebaseio.com",
  projectId: "artisanhub-95aef",
  storageBucket: "artisanhub-95aef.firebasestorage.app",
  messagingSenderId: "850102021847",
  appId: "1:850102021847:web:8f5bd829ffee60b5fe4a92",
  measurementId: "G-8TZTGLKNWW"
};

const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
const db = getDatabase();

const tabs = document.querySelectorAll('.tab-btn');
const sections = document.querySelectorAll('section');
tabs.forEach(tab => {
  tab.addEventListener('click', () => {
    tabs.forEach(t=>t.classList.remove('active'));
    sections.forEach(s=>s.classList.remove('active'));
    tab.classList.add('active');
    document.getElementById(tab.dataset.tab).classList.add('active');
  });
});

const form = document.getElementById('productForm');
const productList = document.getElementById('productList');
const nameInput = document.getElementById('name');
const artisanInput = document.getElementById('artisan');
const priceInput = document.getElementById('price');
const phoneInput = document.getElementById('phone');
const imageInput = document.getElementById('imageUpload');
const categoryInput = document.getElementById('category');
const editIdInput = document.getElementById('editId');
const searchInput = document.getElementById('searchInput');
const categoryFilter = document.getElementById('categoryFilter');
const featured = document.getElementById('featured');

let products = {};

function generateBio(name, artisan, category) {
  const templates = [
    `${name} is a beautifully handcrafted ${category} made with passion by ${artisan}, reflecting the heart of Vocal4Local.`,
    `Each ${category} by ${artisan} tells a story of tradition and skill — ${name} stands out as a masterpiece of local art.`,
    `${artisan}'s ${name} showcases the perfect blend of creativity and craftsmanship, keeping the ${category} culture alive.`,
    `Locally produced by ${artisan}, ${name} is more than just a ${category} — it’s a celebration of India’s vibrant artisan spirit.`,
    `${name}, created by ${artisan}, captures the soul of handmade excellence and promotes sustainable ${category} practices.`
  ];
  return templates[Math.floor(Math.random() * templates.length)];
}

function displayProducts() {
  let search = searchInput.value.toLowerCase();
  let cat = categoryFilter.value;
  productList.innerHTML='';

  const keys = Object.keys(products);
  keys.forEach(id => {
    const p = products[id];
    if((p.name.toLowerCase().includes(search) || p.artisan.toLowerCase().includes(search)) && (cat==''||p.category==cat)){
      const card=document.createElement('div');
      card.classList.add('card');
      card.innerHTML=`
        <img src="${p.image}" alt="${p.name}">
        <h3>${p.name}</h3>
        <p>Artisan: ${p.artisan}</p>
        <p>Price: ₹${p.price}</p>
        <p>Category: ${p.category}</p>
        <p>Phone: ${p.phone}</p>
        <button class="favorite">${p.favorite?'★':'☆'}</button>
        <button class="edit">Edit</button>
        <button class="delete">Delete</button>
        <button class="contact">Contact</button>
      `;
      productList.appendChild(card);

      const imgEl = card.querySelector('img');
      imgEl.addEventListener('click',()=>{ openModal(p.name,p.bio||generateBio(p.name,p.artisan,p.category)); });

      card.querySelector('.favorite').addEventListener('click',(e)=>{
        e.stopPropagation();
        const favRef = ref(db, 'products/'+id);
        update(favRef, {favorite: !p.favorite});
      });

      card.querySelector('.edit').addEventListener('click',(e)=>{
        e.stopPropagation();
        nameInput.value=p.name;
        artisanInput.value=p.artisan;
        priceInput.value=p.price;
        phoneInput.value=p.phone;
        categoryInput.value=p.category;
        editIdInput.value=id;
        document.querySelector('[data-tab="add"]').click();
      });

      card.querySelector('.delete').addEventListener('click',(e)=>{
        e.stopPropagation();
        if(confirm(`Delete "${p.name}"?`)){
          remove(ref(db,'products/'+id));
        }
      });

      card.querySelector('.contact').addEventListener('click',(e)=>{
        e.stopPropagation();
        alert(`Contact ${p.artisan} at: ${p.phone}`);
      });
    }
  });

  if(keys.length>0){
    let randKey = keys[Math.floor(Math.random()*keys.length)];
    const f = products[randKey];
    featured.innerText=`${f.name} by ${f.artisan} - ${f.category}`;
  }else featured.innerText='No products yet.';
}

form.addEventListener('submit',e=>{
  e.preventDefault();
  const file = imageInput.files[0];
  const editId = editIdInput.value;

  const saveProduct = (base64Image)=>{
    const data = {
      name:nameInput.value,
      artisan:artisanInput.value,
      price:priceInput.value,
      phone:phoneInput.value,
      category:categoryInput.value,
      image:base64Image,
      bio:generateBio(nameInput.value, artisanInput.value, categoryInput.value),
      favorite:false
    };
    if(editId){
      update(ref(db,'products/'+editId), data);
    } else {
      push(ref(db,'products'), data);
    }
    form.reset();
    editIdInput.value='';
    document.querySelector('[data-tab="view"]').click();
  };

  if(!file && !editId){ alert("Please select an image."); return; }
  if(file){
    const reader = new FileReader();
    reader.onload = ()=>{ saveProduct(reader.result); };
    reader.readAsDataURL(file);
  } else { saveProduct(products[editId].image); }
});

searchInput.addEventListener('input',displayProducts);
categoryFilter.addEventListener('change',displayProducts);

const modal=document.getElementById('bioModal');
function openModal(title,bio){ document.getElementById('modalTitle').innerText=title; document.getElementById('modalBio').innerText=bio; modal.style.display='flex'; }
function closeModal(){modal.style.display='none';}

// Listen to Firebase database changes
onValue(ref(db,'products'), snapshot=>{
  products = snapshot.val() || {};
  displayProducts();
});
</script>
</body>
</html>
``




